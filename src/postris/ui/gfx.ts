import { Vec, wait, range, choice } from "../helpers";
import * as THREE from "three";
import { Piece, Tetrimino, TetriminoType } from "../logic/piece";
import { State } from "../logic/state";
import { createWalls, createFont, createTopLight, createFrontLight, createBlock, getTexture, createTweenAnimation, createTrail } from "./gfx-helpers";
import { Matrix } from "../logic/matrix";

export class Gfx {
    private scene: THREE.Scene;
    private infos: THREE.Object3D;
    private walls: THREE.Object3D;
    private matrix: THREE.Object3D;
    private gameOver: THREE.Object3D;
    private piece: THREE.Object3D;
    private shadow: THREE.Object3D;
    private preview: THREE.Object3D;
    private hold: THREE.Object3D;

    private mixer: THREE.AnimationMixer;

    private readonly camera: THREE.PerspectiveCamera;
    private readonly renderer: THREE.WebGLRenderer;

    private readonly ambientLight: THREE.AmbientLight;
    private readonly directionalLightTop: THREE.DirectionalLight;
    private readonly directionalLightFront: THREE.DirectionalLight;

    private textures: THREE.Texture[] = [];

    private dimensions: Vec;

    constructor(dimensions: Vec) {
        this.dimensions = dimensions;

        const pieceHudPos = new Vec(3, 10);
        const pieceHudZ = 1;

        this.scene = new THREE.Scene();
        this.infos = new THREE.Group();
        this.walls = this.moveToCenter(createWalls(dimensions));
        this.matrix = this.moveToCenter(new THREE.Group());
        this.gameOver = this.moveToCenter(new THREE.Group());
        this.piece = this.moveToCenter(new THREE.Group());
        this.shadow = this.moveToCenter(new THREE.Group());
        this.preview = this.moveToCenter(new THREE.Group());
        this.preview.position.add(new THREE.Vector3(this.dimensions.x + pieceHudPos.x, pieceHudPos.y, pieceHudZ));
        this.hold = this.moveToCenter(new THREE.Group());
        this.hold.position.add(new THREE.Vector3(-2 - pieceHudPos.x, pieceHudPos.y, pieceHudZ));

        this.ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
        this.directionalLightTop = createTopLight(dimensions);
        this.directionalLightFront = createFrontLight(dimensions);

        this.scene
            .add(this.infos)
            .add(this.walls)
            .add(this.matrix)
            .add(this.gameOver)
            .add(this.piece)
            .add(this.shadow)
            .add(this.preview)
            .add(this.hold)
            .add(this.ambientLight)
            .add(this.directionalLightTop)
            .add(this.directionalLightFront);

        this.camera = new THREE.PerspectiveCamera(80, window.innerWidth / window.innerHeight, 0.1, 50);

        this.renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        this.renderer.shadowMap.enabled = true;
        this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        this.renderer.setClearColor(0xFFFFFF, 0.8);
        this.renderer.setSize(window.innerWidth, window.innerHeight);

        window.addEventListener("resize", () => {
            this.renderer.setSize(window.innerWidth, window.innerHeight);
            this.camera.aspect = window.innerWidth / window.innerHeight;
            this.camera.updateProjectionMatrix();
        });

        this.updateDom();
        this.mixer = new THREE.AnimationMixer(this.camera);
    }

    async init() {
        // O = 0, I = 1, S = 2, Z = 3, L = 4, J = 5, T = 6
        const urls = [
            "public/textures/dispobox.png",
            "public/textures/fragile.png",
            "public/textures/box.png",
            "public/textures/zalando.png",
            "public/textures/letters.png",
            "public/textures/box2.png",
            "public/textures/eco.png",
        ];
        const dataUrls = [
            "data:image/png;base64,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",
            "data:image/png;base64,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",
            "data:image/png;base64,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",
            "data:image/png;base64,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",
            "data:image/png;base64,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",
            "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGAUExURdvGsdm8odW2mNrApsKbeJxsRuHNuda6oNrEreLQvdi5nd3JteDKtNW0lsyqi9a9pN7MudzFrriNZda8odnCrOrbysytktK1menZxti6oN3IsryWc86xlruRa9bBquHSwMSjgtGyleXWxdW2nMmlg8egfK+CWtjAqNzBqeXVwtrAqObZytGtjNGxktW4mti+pNi+puLUxNO0luHGrNrCqtm/qNa6ntCvkti4mta4nNK2nMyohd3EqtrIsdm8ntjCqta4n9q+ptS4nujXxNi8pNq+o76ijNrEq9O4ncGXbsmmiNSyldW0ktW+qNS4nNzCrNy9odSykdjAqti2mtrAq9vCp9GymNa8nuLTwde2lsu1n+fYxtS6n9vJtNe6m+TXyMOkiNfApuXSv9q8pNG4otKxjtbCqMGegd/PvNSxmNO2n8epjd2/perdz7CKadi9puDGsNi7o9a6o+vg0N7Ir9/Ltsenh9S6nNO0k+PTw9fFsNy8nte3l9G3ms+vj+XUxR4EJQwAAA7NSURBVHjaYigWhQAJCRCGAjATKFjFJiHhLCERHS0Bop2BlDMcKGkmaWpqOgMEEENxcS7cCLBCKHB2logWlcsAq9Ws1NRMAgFOEObkZAMCMMXJxgkQQAy5uaLa2tqi2tHIwFlJCWi6Zq6vQEREBFCTfFISG1gfmGBgkJIqZRMQKC1lK2UDCCAGoO54pfj4eCUg0ATpU6qMkAcDTnlRX6kMIIDYxcZWyg2iSqUECwp4SkH6QQAggBi04+MNoQCmkTODMyNDQECA0zlKREAApJMNrJ2bu7SUu5RHqkCqgIebm42Nh4eHoRQggBig2oFOlQdpAqkXALkPqFyAU8aXm5uHpxQKpKR4pHi4pbgLBIEGgEwsYGAoBQggiAHynBkCsQwgALGGOzaWG+hgAQX+WCluntLYWCkpKaCMlCDQCCmpEimg3SAHlPgLSgEEENAAJUN5oOW2HFUcVVVgQ2xtGaQYBBmkYmPT+cEisQyCHBwM3FIMoOAD+qAU5CoeHilBDY0SgAACuaAS6ADuWG7bKogBHEBVghwigoLcnAlF9iEigkAhDkERQW4GDsGSEqDlIMdw8xQI+jObaggCBBCDtlIlMOAyuEHOtmWoquIAGgDUAAT+gkli4onqQWCOoL8ISNjeXhAG/EO0mEOZ3QECiEEbGAJAF5TG2oJBFYcg0Cf2IoLuJhoFDNJ8/Oom6vYi9kH5viIcHCZyab4m/v7qBurqzMz6+vpaWszuAAEEdIGhJjAIgQEF8jvUchERf3UR99iiPD6XEBN1dTk5X/58Ey1mfX4DZmYtLXUDU1Ogdn0gm9kfIIBALqgERXusLdBZIDOATrAXEVFXFwkqNZAV5w8yMTFJVFc3AKrXBxHM6qZAnim/Pr8+s6kBsw1AAIECEZh02Eptqxjc3YHhZ8sB0h+k7u+vJaXPIl4kB/QLsyOzo7C+AdBi00RmdWZHoEagG5g1mJmZNQACiCG+HhQGAqW2IMcL2tpCgtDUnkPQhCNcWobf3t5EQ0Ndw5FfH2iCgYG+FtAAZuZQoGYNZlNmR0eAAAIaAEz7nALAWORQlwNGATQOTOxF1N3FZcV8RUQ0tARtjEP1tQz4+YFOZ9YwZQZZDvRNvqMroytAADFogw0ojZXicAcGNzAYQGlFEBSOIlLKsub5Jhz+BTbSatK6TMn6QP38icz6WqbA8NTPd9R3ZeSSBAggUCBGyIPyGAeHhj2HFDANMhSA45kjiCGOxTtfw6SUzVpILS8sm5FZXd2UPzHRVEsD5HpgREhycekDBBBDvJKmoTwwYwDt1FeHJNWCAkETE3/BIIY6zzB+dS1OV1UWLzEGhTANU3tTU2YDUxOQC0xdXe247MyYAQKIIR6UD9m4pexN7NVtCqSAmUBQsEDQBpheTEqyWawM1Dk0+VRV6wpC1bzytUzUtYC+12IGksyuAXF2jHbMAAHEIJ8BTMkC3FLq6ia+WgXAzA40wN1EkMNdw4RBLF3cwIBN0EtVl9FcVsjLwVRLywSYkDSAYaihxRxgZ+fKbAMQQAwRwCIH6AJBU2CaNSkA2s8B1Kvlrm5iY8Lj5SluwGDjYM5kLi0kxGLukK9l6q4BDFOgJ0OBwNU1pzoSIIAYKoEuiMiI5TAFphd7QWCuMwnR0DAxCRU00SrRUQ3lyedLV1CRlVZVMbdk9jfmKTHO4aoR11FVVWXxVFX1lJUFCCAGwwhgQSgfC/ScRigwEqVKSkpsBAtKbID5lhPoiAQWVWuxsrIyFVVVaz4+HR1rFaBOTyEhIVlZTxBgAQggYJmYK5orwQnM5qWg2CzlESyx0TAuYbazEdblS5dVU5MVUlNTA+mQZlFlYQHpYQHar6Di5QUyUBcggBjkGUR8U1KixMSy+fis+bwUFFRVVaytgUpUPFXTs6VZgQCkH6RdBayJz1rH3FzX3DzTSDEsM7MIIIAYotLd3LLd0mXz8oRkWdKB/gW6F2iIjjifT0VCNki7LIuCgleCF5+YubmiuHimd5i4soclVzAvk7KysoMLQAAxVCrlatcLhLCzs6dYZaWkpNRaZYkr6mWap6cbWScA9eexpHtl84kBdZvLhFmZObBbWTmwm0lKcgVbKCuXcyUDBBCDaG5upQCDiL2vAb++upy6L39REXuoq6qsV0CgAlg/0GoxGZkwIyOQTkZ9/hj2Qn1GSQdLLi5LP0vGZIAAAmYmeQFgaeQOLENM3Dn8geVPsj5nrQyzMZ+QrBor0PnZYjJAR4ub1Xqwsye7COsLA4FLobCDJCM7e6ErM0AAMURHZIAKfGBCVjfhcHdX9xV2cRRkZtbzFMoDRoF0upeYjLg40LtOVjExyllAn7LHAPUXsbMzurLzu7pqAAQQgxKwMOFmEDQBFlHAxKelZaDvom6rb84iKysETH6qKnzmikxMVk5mZsLsZg4ODk7sZk5F+i5AAyQlJR2BXgIIIAYlNikObgYRE2ZgLhX0NzHRMikpMZbxYgEmMlVpaWAAiIsr6znFsAvn6wsnM5pZMrLHsEuC3MFe6MJuJqwPEEAMlaDakFvENMTEBFQI2PCwcbKLF8kAU156gixLnbmMhxN7jEcRP7+jfr6rGaMkUDMjI8j/wvz8ZuzCzAABBMwLGcDSQMQ0CBiGgoL2gjzAIks4RlyMz7pMRlbVPMwKaDtQdWIiMB/bWTIzAzWDzGAXFtaPYXewdAUIIAalDAFuBgYRLX8OE2BJ6O4ODGd2PXEPcRlzmXCWBHGg24EFH7A0N2V2dTXTE050ZUx2ZQQBSTMzZSYmRoAAYtAEVipSHPYm7v7qwFJRRI4/xsxS2UocCIz00sWUzdhd9cFlGLM+I6Md0M8g3a6urgEBAa7MLoxmwgABxFDJCSxNQIlA3QSYBtRNDRjNnGI8gCFXW6tRZiQpDCzONYAFWU4OM7srY5wZUCNQP6NrACNjIbByEmYGCCCGelCJzMBhImJiwpxvoK5lqi8c4+HhJy5u5SGo4u0A1A+sQvmFCxnZLauBhaCdGZckoz4juyTQIUAmlwtAADHUA+tVYDke4q9lyi8MLHJMgYnVid3SwUHZLBRYCPHru7oIC8fEmPmJ8wKzj6QeMDEA04ADMAy4LICACyCAGDTZpBhKBE1CwDr58w1cCmNinMyslC3FHUJZZICRBYz4mBgrcV4jI/HgYGUmLmFGkH4uOy6umppIJi6AAGKoZGMQLBHkUAfGND+wDNd3LWRn93AChWKMuqeik58ZuxmXpWWYOK+ikRETE5MeFyMkIcRZWNQA+VwAAcQQAWy2AcvhUH7hIn4Tf2CB71JUaGbmxyTuZOkurcNUY2FmqQdU6KfMywSkLfXsgEEIjEIuYGZk4mXi5QIIIAZOYEYQNAHGEn8iMB6A/hA2UzYzY2JStnTQz+Nj8vYG6uLljaxgquBlYqqJA0WhK6NZOBcX0FSgG+wAAghkAIN7KDCd6Ce625sAKz92hxh+Mz09S0v2GDUdXm8gUFT0VqxIrVBksuAC2w9MEHZ2XEwWTME1TFwAAQQ0AFitMuvn5wPbDerq+fzAJC7s5KenDExl4bJ8mcCCyFxXN1VXV1dREeifOGBRJAmMPzsLLi4LI96aSC6AAGIQACYCkcRER5d8oCP0+YEFDjCtm4k7KXvzWqqpKOqa1wFBoE+gLjAIgbqAUQ/0PReXsiWXpUUcl4UkQAAxZEgxiMiJAIsDA0dHRnYXR3ZJM3Z2J6csZSZ9JzWVOqDVunV1vLw+3uAYAOVCoPvjQMnAoZrLIjIAIIAYgFlJRIRDXT/RNN/VVdhMElj2ODmxs1saMZlYqVmbKwLdLhPGxBvJpCduKQksxySB6ZhRUtiViys5oDo4OAAggBiATVwROV/fxERQuys83EFZ2cMDFEPevMl1anyKRhUVRsB8xQROAlxcoEgAZiZgOMYBXWERycsFEEAMAsB8AAw9X3V+fv3w8nAnZSeHGGBOYOLlLeRTA5ZnRsDoBybimhomS0suRgiQZAyQBMaDWZwFLxdAAAENEARmxETfRKABQN+DnOnAZARM9ryuZUAveAM1gxIAk4UF0O+MAcBGDdAAYEADDQBmBSY7gAACegFYDKiDmn75hZLsXGbKVspGvMBEw+sdrKKmYu5dAQp9UK4BGQDWLCkM8gQoNriYargAAggYiBwc6sA8DMwJ7MCiBOhfXiNeoDYjRUsVoAt4FYFFOjBZgWIwAFwWSkq6uia7MjOC9Acz1QAEEEMpg72pgS+wDSrM76Sn58fExFtRwcvLa8SkK2wtxKdrxAuswYBRDjTAUpLRNYdZ3zU5BxgRrtVAA4DquAACiEFAENisTQQ2uYRjLJlqxfUsgQZ4RwLTPq8jnyyfOTAMPdjtuIKZLO1c9V2BLcycHGDxps5sByxdLHgDebkAAoihlEPdXl0rXz9RmB1oPdAJwABQFtdjUtR1UJHlA1YqtX5mXBbAoHNlBpatoRo5OaGhOczqjFwWTD4+gd4WAAHEwAZs0pmCWt/8wqB8C6wFeZn8QEUqU6GqLB+vpQOTGTsXF7BKDA8Hlm7AZhGwfcbImGxnwcsbmBroYwEQQEADmE00/LX4hdmd9JiAGoEBowysC5mYnDRUPVPFnYB1uRmwOnU1CwelNGA6AhaR+owWFpE+Pj68PoE1AAHEIABsFnNomQp7OAHzsJ6fsp6RkbIlu5Myl4OJp2edVZG+JCOw/aWlL+wqrK+fGBrKHApsYAIjAKjfJzDQJw4ggIAJCdi4VHdkNPNgNwMWApZ6DuwODkXC5WZmRUIsik75jo4aNho2/sCWW2Iis7uNjZa+HZdecGQkSHtFoE8NQAAxZHBLSXGYOEoCa14zMzNGYVB5Day2hPV9+aVVxQsdQbWKv7+/jWCJCbM/g6CGixMwAUdGRgIzaEUNMBoBAoiBky0DWLfyC7u48PMzChsEAYvFxDRgm5FZxF3WWl8D1OTVCGXWMgEWmzbGNgEWwHK0xieQidfHJxJYKgczAgQQQ0ZpKQe/AzDUvYH5hsmhyBEYV0CX2tgUMHvqugv62wC9rc9uacmkWBMXGaljDWza6ViDAZCh480FEGAAp8nCjOUAwW0AAAAASUVORK5CYII=",
            "data:image/png;base64,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"
        ];
        this.textures = await Promise.all(dataUrls.map(url => getTexture(url)));
        this.animateCamera();
    }

    private updateDom() {
        const canvas = this.renderer.domElement;
        canvas.style.position = "absolute";
        canvas.style.top = "0";
        canvas.style.left = "0";
        canvas.style.zIndex = "1000";
        document.body.style.overflow = "hidden";
        document.body.appendChild(canvas);
    }

    private moveToCenter(object: THREE.Object3D) {
        object.position.x -= this.dimensions.x / 2;
        object.position.z -= 1;
        return object;
    }

    render(delta: number) {
        this.mixer?.update(delta / 1000);
        this.renderer.render(this.scene, this.camera);
    }

    renderMatrix(matrix: Matrix) {
        this.matrix.children = [];
        matrix.blocks.forEach(block =>
            this.matrix.add(createBlock(block.position, this.textures[block.type!]))
        );
    }

    renderPiece(piece?: Piece, shadow?: Piece) {
        this.renderPieceOnly(piece);
        this.renderShadowOnly(shadow);
    }

    private renderPieceOnly(piece?: Piece) {
        this.piece.children = [];
        if (!piece) return;
        const texture = this.textures[piece.tetrimino.type];
        piece.blocks.forEach(block =>
            this.piece.add(createBlock(block, texture))
        )
    }

    private renderShadowOnly(piece?: Piece) {
        this.shadow.children = [];
        if (!piece) return;
        const texture = this.textures[piece.tetrimino.type];
        piece.blocks.forEach(block =>
            this.shadow.add(createBlock(block, texture, 0.3))
        );
    }

    renderPreview(preview: Tetrimino) {
        this.preview.children = [];
        const texture = this.textures[preview.type];
        preview.blocks().forEach(block =>
            this.preview.add(createBlock(block, texture))
        );
    }

    renderHold(tetrimino?: Tetrimino) {
        this.hold.children = [];
        if (!tetrimino) return;
        const texture = this.textures[tetrimino.type];
        tetrimino.blocks().forEach(block =>
            this.hold.add(createBlock(block, texture))
        );
    }

    renderText(state: State) {
        this.infos.children = [];

        const size = 0.3;
        const leftX = -12.5;
        const rightX = this.dimensions.x - 3;

        const createLine = (text: string, x: number, y: number) => {
            const mesh = createFont(text, size);
            mesh.position.set(x, 5.5 - y * size * 2, 2);
            this.infos.add(mesh);
        }

        const timeStr = `${(Math.floor(state.time / 60)).toString().padStart(2, "0")}:${(state.time % 60).toString().padStart(2, "0")}`;

        createLine(`Postris`, leftX, 0);
        createLine(`Time:   ${timeStr}`, leftX, 2);
        createLine(`Level:  ${state.level}`, leftX, 3);
        createLine(`Score:  ${state.score}`, leftX, 4);
        createLine(`Lines:  ${state.lines}`, leftX, 5);
        createLine(`Pieces: ${state.count}`, leftX, 6);

        createLine(`Left: move left`, rightX, 0);
        createLine(`Right:move right`, rightX, 1);
        createLine(`Down: soft drop`, rightX, 2);
        createLine(`Up:   hard drop`, rightX, 3);
        createLine(`Y:    rotate ccw`, rightX, 4);
        createLine(`X:    rotate cw`, rightX, 5);
        createLine(`C:    hold`, rightX, 6);
    }

    async animateClear(lines: number[]) {
        for (const x of range(this.dimensions.x)) {
            for (const y of lines) {
                const block = this.scene.getObjectByName(`${x}.${y}`);
                block?.parent?.remove(block);
            }
            await wait(150 / this.dimensions.x);
        }
    }

    animateDrop(before: Piece, after: Piece) {
        const bounce = 0.1;
        const trail = this.moveToCenter(createTrail(before, after));
        this.scene.add(trail);
        this.scene.position.y -= bounce;
        wait(30).then(() => {
            this.scene.remove(trail);
            this.scene.position.y += bounce;
        });
    }

    animateCamera() {
        const base = this.dimensions.y;

        const before = this.camera.clone();
        before.position.set(0, base * 1.0, base * 0.6);
        before.lookAt(new THREE.Vector3(0, base * 0.6, -30));

        const after = this.camera.clone();
        after.position.set(0, base * 0.3, base * 0.8);
        after.lookAt(new THREE.Vector3(0, base * 0.45, 0));

        const animation = this.mixer.clipAction(createTweenAnimation("camera", 5, before, after));
        animation.setLoop(THREE.LoopOnce, 1);
        animation.clampWhenFinished = true;
        animation.play();
    }

    async animateGameOver(matrix: Matrix) {
        const waitTime = 1500 / this.dimensions.x / this.dimensions.y;
        for (const y of range(this.dimensions.y + 5)) {
            for (const x of range(this.dimensions.x)) {
                const position = new Vec(x, y);
                if (matrix.isFree(position)) {
                    const type = choice(range(7)) as TetriminoType;
                    matrix.set(position, type);
                    this.gameOver.add(createBlock(position, this.textures[type]));
                }
                await wait(waitTime);
            }
        }
    }
}
